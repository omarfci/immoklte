(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof module&&"object"===typeof module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(e){function w(a){if(p||a)p&&a&&(e(document).unbind(".smartmenus_mouse"),p=!1);else{var b=!0,d=null;e(document).bind(r([["mousemove",function(a){var c={x:a.pageX,y:a.pageY,timeStamp:(new Date).getTime()};if(d){var h=Math.abs(d.x-c.x),g=Math.abs(d.y-c.y);if((0<h||0<g)&&2>=h&&2>=g&&300>=c.timeStamp-d.timeStamp&&(l=
!0,b)){var n=e(a.target).closest("a");n.is("a")&&e.each(k,function(){if(e.contains(this.$root[0],n[0]))return this.itemEnter({currentTarget:n[0]}),!1});b=!1}}d=c}],[x?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut",function(a){/^(4|mouse)$/.test(a.originalEvent.pointerType)||(l=!1)}]],".smartmenus_mouse"));p=!0}}function r(a,b){b||(b="");var d={};e.each(a,function(a,e){d[e[0].split(" ").join(b+" ")+b]=e[1]});return d}var k=[],y=!!window.createPopup,l=!1,
x="ontouchstart"in window,p=!1,z=window.requestAnimationFrame||function(a){return setTimeout(a,1E3/60)},A=window.cancelAnimationFrame||function(a){clearTimeout(a)};e.SmartMenus=function(a,b){this.$root=e(a);this.opts=b;this.accessIdPrefix=this.rootId="";this.$subArrow=null;this.activatedItems=[];this.visibleSubMenus=[];this.scrollTimeout=this.hideTimeout=this.showTimeout=0;this.focusActivated=this.clickActivated=!1;this.idInc=this.zIndexInc=0;this.$firstSub=this.$firstLink=null;this.disabled=!1;this.$touchScrollingSub=
this.$disableOverlay=null;this.cssTransforms3d="perspective"in a.style||"webkitPerspective"in a.style;this.wasCollapsible=!1;this.init()};e.extend(e.SmartMenus,{hideAll:function(){e.each(k,function(){this.menuHideAll()})},destroy:function(){for(;k.length;)k[0].destroy();w(!0)},prototype:{init:function(a){var b=this;a||(k.push(this),this.rootId=((new Date).getTime()+Math.random()+"").replace(/\D/g,""),this.accessIdPrefix="sm-"+this.rootId+"-",this.$root.hasClass("sm-rtl")&&(this.opts.rightToLeftSubMenus=
!0),a=".smartmenus",this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).bind(r([["mouseover focusin",e.proxy(this.rootOver,this)],["mouseout focusout",e.proxy(this.rootOut,this)],["keydown",e.proxy(this.rootKeyDown,this)]],a)).delegate("a",r([["mouseenter",e.proxy(this.itemEnter,this)],["mouseleave",e.proxy(this.itemLeave,this)],["mousedown",e.proxy(this.itemDown,this)],["focus",e.proxy(this.itemFocus,this)],["blur",e.proxy(this.itemBlur,this)],["click",e.proxy(this.itemClick,
this)]],a)),a+=this.rootId,this.opts.hideOnClick&&e(document).bind(r([["touchstart",e.proxy(this.docTouchStart,this)],["touchmove",e.proxy(this.docTouchMove,this)],["touchend",e.proxy(this.docTouchEnd,this)],["click",e.proxy(this.docClick,this)]],a)),e(window).bind(r([["resize orientationchange",e.proxy(this.winResize,this)]],a)),this.opts.subIndicators&&(this.$subArrow=e("<span/>").addClass("sub-arrow"),this.opts.subIndicatorsText&&this.$subArrow.html(this.opts.subIndicatorsText)),w());this.$firstSub=
this.$root.find("ul").each(function(){b.menuInit(e(this))}).eq(0);this.$firstLink=this.$root.find("a").eq(0);if(this.opts.markCurrentItem){var d=/(index|default)\.[^#\?\/]*/i,c=window.location.href.replace(d,""),f=c.replace(/#.*/,"");this.$root.find("a").each(function(){var a=this.href.replace(d,""),g=e(this);if(a==c||a==f)g.addClass("current"),b.opts.markCurrentTree&&g.parentsUntil("[data-smartmenus-id]","ul").each(function(){e(this).dataSM("parent-a").addClass("current")})})}this.wasCollapsible=
this.isCollapsible()},destroy:function(a){if(!a){var b=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").unbind(b).undelegate(b);b+=this.rootId;e(document).unbind(b);e(window).unbind(b);this.opts.subIndicators&&(this.$subArrow=null)}this.menuHideAll();var d=this;this.$root.find("ul").each(function(){var a=e(this);a.dataSM("scroll-arrows")&&a.dataSM("scroll-arrows").remove();a.dataSM("shown-before")&&((d.opts.subMenusMinWidth||d.opts.subMenusMaxWidth)&&
a.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap"),a.dataSM("scroll-arrows")&&a.dataSM("scroll-arrows").remove(),a.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""}));0==(a.attr("id")||"").indexOf(d.accessIdPrefix)&&a.removeAttr("id")}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("ie-shim").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeAttr("aria-expanded");
this.$root.find("a.has-submenu").each(function(){var a=e(this);0==a.attr("id").indexOf(d.accessIdPrefix)&&a.removeAttr("id")}).removeClass("has-submenu").removeDataSM("sub").removeAttr("aria-haspopup").removeAttr("aria-controls").removeAttr("aria-expanded").closest("li").removeDataSM("sub");this.opts.subIndicators&&this.$root.find("span.sub-arrow").remove();this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current");a||(this.$firstSub=this.$firstLink=this.$root=null,this.$disableOverlay&&
(this.$disableOverlay.remove(),this.$disableOverlay=null),k.splice(e.inArray(this,k),1))},disable:function(a){this.disabled||(this.menuHideAll(),a||this.opts.isPopup||!this.$root.is(":visible")||(a=this.$root.offset(),this.$disableOverlay=e('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:a.top,left:a.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)),this.disabled=!0)},docClick:function(a){this.$touchScrollingSub?
this.$touchScrollingSub=null:(this.visibleSubMenus.length&&!e.contains(this.$root[0],a.target)||e(a.target).is("a"))&&this.menuHideAll()},docTouchEnd:function(a){if(this.lastTouch){if(!(!this.visibleSubMenus.length||void 0!==this.lastTouch.x2&&this.lastTouch.x1!=this.lastTouch.x2||void 0!==this.lastTouch.y2&&this.lastTouch.y1!=this.lastTouch.y2||this.lastTouch.target&&e.contains(this.$root[0],this.lastTouch.target))){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var b=this;
this.hideTimeout=setTimeout(function(){b.menuHideAll()},350)}this.lastTouch=null}},docTouchMove:function(a){this.lastTouch&&(a=a.originalEvent.touches[0],this.lastTouch.x2=a.pageX,this.lastTouch.y2=a.pageY)},docTouchStart:function(a){a=a.originalEvent.touches[0];this.lastTouch={x1:a.pageX,y1:a.pageY,target:a.target}},enable:function(){this.disabled&&(this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),this.disabled=!1)},getClosestMenu:function(a){for(a=e(a).closest("ul");a.dataSM("in-mega");)a=
a.parent().closest("ul");return a[0]||null},getHeight:function(a){return this.getOffset(a,!0)},getOffset:function(a,b){if("none"==a.css("display")){var d={position:a[0].style.position,visibility:a[0].style.visibility};a.css({position:"absolute",visibility:"hidden"}).show()}var c=a[0].getBoundingClientRect&&a[0].getBoundingClientRect();(c=c&&(b?c.height||c.bottom-c.top:c.width||c.right-c.left))||0===c||(c=b?a[0].offsetHeight:a[0].offsetWidth);d&&a.hide().css(d);return c},getStartZIndex:function(a){var b=
parseInt(this[a?"$root":"$firstSub"].css("z-index"));!a&&isNaN(b)&&(b=parseInt(this.$root.css("z-index")));return isNaN(b)?1:b},getTouchPoint:function(a){return a.touches&&a.touches[0]||a.changedTouches&&a.changedTouches[0]||a},getViewport:function(a){var b=a?"Height":"Width";a=document.documentElement["client"+b];(b=window["inner"+b])&&(a=Math.min(a,b));return a},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function(a){return this.getOffset(a)},
handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(a){return this.handleEvents()&&!this.isLinkInMegaMenu(a)},isCollapsible:function(){return"static"==this.$firstSub.css("position")},isCSSOn:function(){return"block"==this.$firstLink.css("display")},isFixed:function(){var a="fixed"==this.$root.css("position");a||this.$root.parentsUntil("body").each(function(){if("fixed"==e(this).css("position"))return a=!0,!1});return a},isLinkInMegaMenu:function(a){return e(this.getClosestMenu(a[0])).hasClass("mega-menu")},
isTouchMode:function(){return!l||this.opts.noMouseOver||this.isCollapsible()},itemActivate:function(a,b){var d=a.closest("ul"),c=d.dataSM("level");if(1<c&&(!this.activatedItems[c-2]||this.activatedItems[c-2][0]!=d.dataSM("parent-a")[0])){var f=this;e(d.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(d).each(function(){f.itemActivate(e(this).dataSM("parent-a"))})}this.isCollapsible()&&!b||this.menuHideSubMenus(this.activatedItems[c-1]&&this.activatedItems[c-1][0]==a[0]?c:c-1);this.activatedItems[c-
1]=a;!1!==this.$root.triggerHandler("activate.smapi",a[0])&&(d=a.dataSM("sub"))&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)&&this.menuShow(d)},itemBlur:function(a){a=e(a.currentTarget);this.handleItemEvents(a)&&this.$root.triggerHandler("blur.smapi",a[0])},itemClick:function(a){var b=e(a.currentTarget);if(this.handleItemEvents(b)){if(this.$touchScrollingSub&&this.$touchScrollingSub[0]==b.closest("ul")[0])return this.$touchScrollingSub=null,a.stopPropagation(),!1;if(!1===this.$root.triggerHandler("click.smapi",
b[0]))return!1;a=e(a.target).is("span.sub-arrow");var d=b.dataSM("sub"),c=d?2==d.dataSM("level"):!1;if(d&&!d.is(":visible")){if(this.opts.showOnClick&&c&&(this.clickActivated=!0),this.itemActivate(b),d.is(":visible"))return this.focusActivated=!0,!1}else if(this.isCollapsible()&&a)return this.itemActivate(b),this.menuHide(d),!1;if(this.opts.showOnClick&&c||b.hasClass("disabled")||!1===this.$root.triggerHandler("select.smapi",b[0]))return!1}},itemDown:function(a){a=e(a.currentTarget);this.handleItemEvents(a)&&
a.dataSM("mousedown",!0)},itemEnter:function(a){var b=e(a.currentTarget);if(this.handleItemEvents(b)){if(!this.isTouchMode()){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);var d=this;this.showTimeout=setTimeout(function(){d.itemActivate(b)},this.opts.showOnClick&&1==b.closest("ul").dataSM("level")?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",b[0])}},itemFocus:function(a){a=e(a.currentTarget);this.handleItemEvents(a)&&(!this.focusActivated||this.isTouchMode()&&
a.dataSM("mousedown")||this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0]==a[0]||this.itemActivate(a,!0),this.$root.triggerHandler("focus.smapi",a[0]))},itemLeave:function(a){a=e(a.currentTarget);this.handleItemEvents(a)&&(this.isTouchMode()||(a[0].blur(),this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0)),a.removeDataSM("mousedown"),this.$root.triggerHandler("mouseleave.smapi",a[0]))},menuHide:function(a){if(!1!==this.$root.triggerHandler("beforehide.smapi",
a[0])&&(a.stop(!0,!0),"none"!=a.css("display"))){var b=function(){a.css("z-index","")};this.isCollapsible()?this.opts.collapsibleHideFunction?this.opts.collapsibleHideFunction.call(this,a,b):a.hide(this.opts.collapsibleHideDuration,b):this.opts.hideFunction?this.opts.hideFunction.call(this,a,b):a.hide(this.opts.hideDuration,b);a.dataSM("ie-shim")&&a.dataSM("ie-shim").remove().css({"-webkit-transform":"",transform:""});a.dataSM("scroll")&&(this.menuScrollStop(a),a.css({"touch-action":"","-ms-touch-action":"",
"-webkit-transform":"",transform:""}).unbind(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide());a.dataSM("parent-a").removeClass("highlighted").attr("aria-expanded","false");a.attr({"aria-expanded":"false","aria-hidden":"true"});b=a.dataSM("level");this.activatedItems.splice(b-1,1);this.visibleSubMenus.splice(e.inArray(a,this.visibleSubMenus),1);this.$root.triggerHandler("hide.smapi",a[0])}},menuHideAll:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=
0);for(var a=this.opts.isPopup?1:0,b=this.visibleSubMenus.length-1;b>=a;b--)this.menuHide(this.visibleSubMenus[b]);this.opts.isPopup&&(this.$root.stop(!0,!0),this.$root.is(":visible")&&(this.opts.hideFunction?this.opts.hideFunction.call(this,this.$root):this.$root.hide(this.opts.hideDuration),this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").remove()));this.activatedItems=[];this.visibleSubMenus=[];this.focusActivated=this.clickActivated=!1;this.zIndexInc=0;this.$root.triggerHandler("hideAll.smapi")},
menuHideSubMenus:function(a){for(var b=this.activatedItems.length-1;b>=a;b--){var d=this.activatedItems[b].dataSM("sub");d&&this.menuHide(d)}},menuIframeShim:function(a){y&&this.opts.overlapControlsInIE&&!a.dataSM("ie-shim")&&a.dataSM("ie-shim",e("<iframe/>").attr({src:"javascript:0",tabindex:-9}).css({position:"absolute",top:"auto",left:"0",opacity:0,border:"0"}))},menuInit:function(a){if(!a.dataSM("in-mega")){a.hasClass("mega-menu")&&a.find("ul").dataSM("in-mega",!0);for(var b=2,d=a[0];(d=d.parentNode.parentNode)!=
this.$root[0];)b++;d=a.prevAll("a").eq(-1);d.length||(d=a.prevAll().find("a").eq(-1));d.addClass("has-submenu").dataSM("sub",a);a.dataSM("parent-a",d).dataSM("level",b).parent().dataSM("sub",a);b=d.attr("id")||this.accessIdPrefix+ ++this.idInc;var c=a.attr("id")||this.accessIdPrefix+ ++this.idInc;d.attr({id:b,"aria-haspopup":"true","aria-controls":c,"aria-expanded":"false"});a.attr({id:c,role:"group","aria-hidden":"true","aria-labelledby":b,"aria-expanded":"false"});if(this.opts.subIndicators)d[this.opts.subIndicatorsPos](this.$subArrow.clone())}},
menuPosition:function(a){var b=a.dataSM("parent-a"),d=b.closest("li"),c=d.parent(),f=a.dataSM("level"),h=this.getWidth(a),g=this.getHeight(a),n=b.offset(),l=n.left,k=n.top;n=this.getWidth(b);b=this.getHeight(b);var q=e(window),p=q.scrollLeft();q=q.scrollTop();var w=this.getViewportWidth(),u=this.getViewportHeight();c=c.parent().is("[data-sm-horizontal-sub]")||2==f&&!c.hasClass("sm-vertical");d=this.opts.rightToLeftSubMenus&&!d.is("[data-sm-reverse]")||!this.opts.rightToLeftSubMenus&&d.is("[data-sm-reverse]");
var v=2==f?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,m=2==f?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY;c?(f=d?n-h-v:v,m=this.opts.bottomToTopSubMenus?-g-m:b+m):(f=d?v-h:n-v,m=this.opts.bottomToTopSubMenus?b-m-g:m);if(this.opts.keepInViewport){l+=f;k+=m;d&&l<p?f=c?p-l+f:n-v:!d&&l+h>p+w&&(f=c?p+w-h-l+f:v-h);if(!c)if(g<u&&k+g>q+u)m+=q+u-g-k;else if(g>=u||k<q)m+=q-k;if(c&&(k+g>q+u+.49||k<q)||!c&&g>u+.49){var t=this;a.dataSM("scroll-arrows")||a.dataSM("scroll-arrows",e([e('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],
e('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).bind({mouseenter:function(){a.dataSM("scroll").up=e(this).hasClass("scroll-up");t.menuScroll(a)},mouseleave:function(b){t.menuScrollStop(a);t.menuScrollOut(a,b)},"mousewheel DOMMouseScroll":function(a){a.preventDefault()}}).insertAfter(a));a.dataSM("scroll",{y:this.cssTransforms3d?0:m-b,step:1,itemH:b,subH:g,arrowDownH:this.getHeight(a.dataSM("scroll-arrows").eq(1))}).bind(r([["mouseover",function(b){t.menuScrollOver(a,
b)}],["mouseout",function(b){t.menuScrollOut(a,b)}],["mousewheel DOMMouseScroll",function(b){t.menuScrollMousewheel(a,b)}]],".smartmenus_scroll")).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:f+(parseInt(a.css("border-left-width"))||0),width:h-(parseInt(a.css("border-left-width"))||0)-(parseInt(a.css("border-right-width"))||0),zIndex:a.css("z-index")}).eq(c&&this.opts.bottomToTopSubMenus?0:1).show();this.isFixed()&&a.css({"touch-action":"none","-ms-touch-action":"none"}).bind(r([[x?
"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp",function(b){t.menuScrollTouch(a,b)}]],".smartmenus_scroll"))}}a.css({top:"auto",left:"0",marginLeft:f,marginTop:m-b});this.menuIframeShim(a);a.dataSM("ie-shim")&&a.dataSM("ie-shim").css({zIndex:a.css("z-index"),width:h,height:g,marginLeft:f,marginTop:m-b})},menuScroll:function(a,b,d){var c=a.dataSM("scroll"),e=a.dataSM("scroll-arrows"),h=c.up?c.upEnd:c.downEnd;if(!b&&c.momentum){if(c.momentum*=
.92,d=c.momentum,.5>d){this.menuScrollStop(a);return}}else d=d||(b||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(c.step));var g=a.dataSM("level");this.activatedItems[g-1]&&this.activatedItems[g-1].dataSM("sub")&&this.activatedItems[g-1].dataSM("sub").is(":visible")&&this.menuHideSubMenus(g-1);c.y=c.up&&h<=c.y||!c.up&&h>=c.y?c.y:Math.abs(h-c.y)>d?c.y+(c.up?d:-d):h;a.add(a.dataSM("ie-shim")).css(this.cssTransforms3d?{"-webkit-transform":"translate3d(0, "+c.y+"px, 0)",transform:"translate3d(0, "+
c.y+"px, 0)"}:{marginTop:c.y});l&&(c.up&&c.y>c.downEnd||!c.up&&c.y<c.upEnd)&&e.eq(c.up?1:0).show();if(c.y==h)l&&e.eq(c.up?0:1).hide(),this.menuScrollStop(a);else if(!b){this.opts.scrollAccelerate&&c.step<this.opts.scrollStep&&(c.step+=.2);var k=this;this.scrollTimeout=z(function(){k.menuScroll(a)})}},menuScrollMousewheel:function(a,b){if(this.getClosestMenu(b.target)==a[0]){b=b.originalEvent;var d=0<(b.wheelDelta||-b.detail);a.dataSM("scroll-arrows").eq(d?0:1).is(":visible")&&(a.dataSM("scroll").up=
d,this.menuScroll(a,!0))}b.preventDefault()},menuScrollOut:function(a,b){l&&(/^scroll-(up|down)/.test((b.relatedTarget||"").className)||(a[0]==b.relatedTarget||e.contains(a[0],b.relatedTarget))&&this.getClosestMenu(b.relatedTarget)==a[0]||a.dataSM("scroll-arrows").css("visibility","hidden"))},menuScrollOver:function(a,b){if(l&&!/^scroll-(up|down)/.test(b.target.className)&&this.getClosestMenu(b.target)==a[0]){this.menuScrollRefreshData(a);var d=a.dataSM("scroll"),c=e(window).scrollTop()-a.dataSM("parent-a").offset().top-
d.itemH;a.dataSM("scroll-arrows").eq(0).css("margin-top",c).end().eq(1).css("margin-top",c+this.getViewportHeight()-d.arrowDownH).end().css("visibility","visible")}},menuScrollRefreshData:function(a){var b=a.dataSM("scroll"),d=e(window).scrollTop()-a.dataSM("parent-a").offset().top-b.itemH;this.cssTransforms3d&&(d=-(parseFloat(a.css("margin-top"))-d));e.extend(b,{upEnd:d,downEnd:d+this.getViewportHeight()-b.subH})},menuScrollStop:function(a){if(this.scrollTimeout)return A(this.scrollTimeout),this.scrollTimeout=
0,a.dataSM("scroll").step=1,!0},menuScrollTouch:function(a,b){b=b.originalEvent;if(!/^(4|mouse)$/.test(b.pointerType)){var d=this.getTouchPoint(b);if(this.getClosestMenu(d.target)==a[0]){var c=a.dataSM("scroll");if(/(start|down)$/i.test(b.type))this.menuScrollStop(a)?(b.preventDefault(),this.$touchScrollingSub=a):this.$touchScrollingSub=null,this.menuScrollRefreshData(a),e.extend(c,{touchStartY:d.pageY,touchStartTime:b.timeStamp});else if(/move$/i.test(b.type)){var f=void 0!==c.touchY?c.touchY:c.touchStartY;
if(void 0!==f&&f!=d.pageY){this.$touchScrollingSub=a;var h=f<d.pageY;void 0!==c.up&&c.up!=h&&e.extend(c,{touchStartY:d.pageY,touchStartTime:b.timeStamp});e.extend(c,{up:h,touchY:d.pageY});this.menuScroll(a,!0,Math.abs(d.pageY-f))}b.preventDefault()}else if(void 0!==c.touchY){if(c.momentum=15*Math.pow(Math.abs(d.pageY-c.touchStartY)/(b.timeStamp-c.touchStartTime),2))this.menuScrollStop(a),this.menuScroll(a),b.preventDefault();delete c.touchY}}}},menuShow:function(a){if(!a.dataSM("beforefirstshowfired")&&
(a.dataSM("beforefirstshowfired",!0),!1===this.$root.triggerHandler("beforefirstshow.smapi",a[0])))return;if(!1!==this.$root.triggerHandler("beforeshow.smapi",a[0])&&(a.dataSM("shown-before",!0).stop(!0,!0),!a.is(":visible"))){var b=a.dataSM("parent-a");(this.opts.keepHighlighted||this.isCollapsible())&&b.addClass("highlighted");if(this.isCollapsible())a.removeClass("sm-nowrap").css({zIndex:"",width:"auto",minWidth:"",maxWidth:"",top:"",left:"",marginLeft:"",marginTop:""});else{a.css("z-index",this.zIndexInc=
(this.zIndexInc||this.getStartZIndex())+1);if(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth)if(a.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&a.css("min-width",this.opts.subMenusMinWidth),this.opts.subMenusMaxWidth){var d=this.getWidth(a);a.css("max-width",this.opts.subMenusMaxWidth);d>this.getWidth(a)&&a.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}this.menuPosition(a);a.dataSM("ie-shim")&&a.dataSM("ie-shim").insertBefore(a)}d=
function(){a.css("overflow","")};this.isCollapsible()?this.opts.collapsibleShowFunction?this.opts.collapsibleShowFunction.call(this,a,d):a.show(this.opts.collapsibleShowDuration,d):this.opts.showFunction?this.opts.showFunction.call(this,a,d):a.show(this.opts.showDuration,d);b.attr("aria-expanded","true");a.attr({"aria-expanded":"true","aria-hidden":"false"});this.visibleSubMenus.push(a);this.$root.triggerHandler("show.smapi",a[0])}},popupHide:function(a){this.hideTimeout&&(clearTimeout(this.hideTimeout),
this.hideTimeout=0);var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},a?1:this.opts.hideTimeout)},popupShow:function(a,b){if(this.opts.isPopup){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),this.$root.dataSM("shown-before",!0).stop(!0,!0),!this.$root.is(":visible")){this.$root.css({left:a,top:b});this.menuIframeShim(this.$root);this.$root.dataSM("ie-shim")&&this.$root.dataSM("ie-shim").css({zIndex:this.$root.css("z-index"),width:this.getWidth(this.$root),
height:this.getHeight(this.$root),left:a,top:b}).insertBefore(this.$root);var d=this,c=function(){d.$root.css("overflow","")};this.opts.showFunction?this.opts.showFunction.call(this,this.$root,c):this.$root.show(this.opts.showDuration,c);this.visibleSubMenus[0]=this.$root}}else alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.')},refresh:function(){this.destroy(!0);this.init(!0)},rootKeyDown:function(a){if(this.handleEvents())switch(a.keyCode){case 27:if(a=
this.activatedItems[0]){this.menuHideAll();a[0].focus();var b=a.dataSM("sub");b&&this.menuHide(b)}break;case 32:b=e(a.target),b.is("a")&&this.handleItemEvents(b)&&(b=b.dataSM("sub"))&&!b.is(":visible")&&(this.itemClick({currentTarget:a.target}),a.preventDefault())}},rootOut:function(a){if(this.handleEvents()&&!this.isTouchMode()&&a.target!=this.$root[0]&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),!this.opts.showOnClick||!this.opts.hideOnClick)){var b=this;this.hideTimeout=
setTimeout(function(){b.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(a){this.handleEvents()&&!this.isTouchMode()&&a.target!=this.$root[0]&&this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},winResize:function(a){this.handleEvents()?"onorientationchange"in window&&"orientationchange"!=a.type||(a=this.isCollapsible(),this.wasCollapsible&&a||(this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0].blur(),this.menuHideAll()),this.wasCollapsible=
a):this.$disableOverlay&&(a=this.$root.offset(),this.$disableOverlay.css({top:a.top,left:a.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()}))}}});e.fn.dataSM=function(a,b){return b?this.data(a+"_smartmenus",b):this.data(a+"_smartmenus")};e.fn.removeDataSM=function(a){return this.removeData(a+"_smartmenus")};e.fn.smartmenus=function(a){if("string"==typeof a){var b=arguments,d=a;Array.prototype.shift.call(b);return this.each(function(){var a=e(this).data("smartmenus");a&&a[d]&&a[d].apply(a,
b)})}var c=this.data("sm-options")||null;if(c)try{c=eval("("+c+")")}catch(f){c=null,alert('ERROR\n\nSmartMenus jQuery init:\nInvalid "data-sm-options" attribute value syntax.')}return this.each(function(){new e.SmartMenus(this,e.extend({},e.fn.smartmenus.defaults,a,c))})};e.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"prepend",subIndicatorsText:"+",
scrollStep:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(a,b){a.fadeOut(200,b)},collapsibleShowDuration:0,collapsibleShowFunction:function(a,b){a.slideDown(200,b)},collapsibleHideDuration:0,collapsibleHideFunction:function(a,b){a.slideUp(200,b)},showOnClick:!1,hideOnClick:!0,noMouseOver:!1,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,overlapControlsInIE:!0};
return e});